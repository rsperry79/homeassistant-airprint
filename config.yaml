name: AirPrint Server
version: "1.0"
slug: airprint
description: An AirPrint Server
url: >-
  https://github.com/rsperry79/homeassistant-airprint

# System Settings
arch:
  - amd64
  - aarch64
boot: auto
startup: system
usb: true
init: false
host_network: true
ports:
  631/tcp: 631
  631/udp: 631
  # 5150/tcp: 5150
  5353/udp: 5353
map:
  - type: addon_config
    read_only: false
    path: /config
  - type: share
    read_only: false
    path: /share

  - type: homeassistant_config
    read_only: true
    path: /homeassistant
  - type: ssl
    read_only: true
    path: /ssl

# Backup settings
backup_exclude:
  - "/config/apt-cache"
  - "**/*.log"

# HA API
hassio_role: default
hassio_api: true
homeassistant_api: true

# Sidebar
panel_icon: mdi:printer
ingress: true
ingress_port: 5150

# ingress_stream: true

#webui: http://[HOST]:[PORT:631]/

# Health
watchdog: http://[HOST]:[PORT:631]/printers

# Options
options:
  AVAHI_SETTINGS:
    AVAHI_DEBUG: false
    AVAHI_REFLECTOR: false
    AVAHI_REFLECTOR_IPV: false
    AVAHI_USE_IPV6: false
  CUPS_LOGGING:
    CUPS_FATAL_ERROR_LEVEL: permissions
    CUPS_LOG_TO_FILE: true
    CUPS_LOG_LEVEL: info
    CUPS_ACCESS_LOG_TO_FILE: true
    CUPS_ACCESS_LOG_LEVEL: all
  CUPS_SSL:
    CUPS_ENCRYPTION: Never
  NGINX_LOGGING:
    NGINX_LOG_LEVEL: warn
    NGINX_ERROR_LOG_TO_FILE: true
    NGINX_ACCESS_LOG_TO_FILE: true
  logins:
    - username: print
      password: "print"
      user_level: superuser
  custom_packages:
    run_script: true
    packages:
      - "printer-driver-all"
      - "foomatic-db"
      - "foomatic-filters"
      - "foomatic-filters-beh"
    install_recommends: true
    package_debug: false

schema:
  custom_packages:
    run_script: bool
    install_recommends: bool
    packages:
      - str?
    package_debug: bool?
  AVAHI_SETTINGS:
    AVAHI_DEBUG: bool
    AVAHI_REFLECTOR: bool
    AVAHI_REFLECTOR_IPV: bool
    AVAHI_USE_IPV6: bool
  CUPS_LOGGING:
    CUPS_FATAL_ERROR_LEVEL: list(none|all|browse|config|listen|log|permissions)
    CUPS_LOG_TO_FILE: bool
    CUPS_LOG_LEVEL: list(debug|info|notice|error|none)
    CUPS_ACCESS_LOG_TO_FILE: bool
    CUPS_ACCESS_LOG_LEVEL: list(all|actions|config)
  CUPS_SSL:
    CUPS_ENCRYPTION: list(IfRequested|Required|Never)
  NGINX_LOGGING:
    NGINX_ERROR_LOG_TO_FILE: bool
    NGINX_ACCESS_LOG_TO_FILE: bool
    NGINX_LOG_LEVEL: list(warn|error|crit|alert|emerg)
  logins:
    - username: str
      password: str
      user_level: list(standard|admin|superuser)
